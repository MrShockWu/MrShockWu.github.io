<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>南京创新零售</title>
  <script src="./jquery-3.4.1.min.js"></script>
 <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>

<style>
  body {
    /* background: #ccc; */
  }

  h2 {
    text-align: center;
  }

  .firstdiv {
    width: 100%;
    height: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    padding-right: 20px;
    padding-left: 20px;
  }

  input {
    border-width: 0;
  }

  .samediv {
    height: 40px;
    line-height: 40px;
  }

  span {
    display: inline-block;
    width: 100%;
    line-height: 30px;
  }

  span label {
    /* background: #ccc; */
    width: 45%;
    margin-top: 0px
  }

  span input {
    width: 45%;
    margin-top: 0px
  }

  span textarea {
    margin-left: 50px;
    margin-top: 0px;
    border: 1px solid gold;
  }
  .gameNamediv {
    margin-left: 50px;
    /* margin-top: 0px; */
    border: 1px solid gold;
  }
  label {
    font-size: 18px;
    font-weight: bold;
  }

  .specialDiv span {
    margin-top: 0px
  }

  .specialSpan {
    height: 100px;
    /* line-height: 100px; */
    vertical-align: top;
  }

  .textarea-inherit {
    width: 100%;
    overflow: auto;
    word-break: break-all;
  }

  .alert-content {
    width: 1000px;
    height: 560px;
    position: absolute;
    top: 10px;
    left: calc(50% - 500px);
    background: #fff;
    box-shadow: 5px 5px 5px 5px #999;
    color: #666;
    border: 1px solid #f8f8f8;
    border-radius: 2px;
  }

  .hongbao-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    background-color: rgba(0, 0, 0, .65);
    z-index: 9999;
    text-align: center;
  }

  .hongbao {
    text-align: center;
    height: 480px;
    background: #f05a49;
    width: 300px;
    left: 0;
    top: 0;
    border-radius: 10px;
    margin: 0 auto;
  }

  .topcontent {
    height: 380px;
    border: 1px solid #e05e44;
    background-color: #ee614f;
    border-radius: 10px 10px 50% 50% / 10px 10px 12% 12%;
    box-shadow: 0px 2px 0px -1px rgba(0, 0, 0, 0.2);
  }

  .topcontent2 {
    height: 380px;
    text-align: center;

  }

  .avatar {
    position: relative;

  }

  .avatar img {
    margin-right: 1px;
    width: 50px;
    height: 50px;
    border-radius: 8px;
    overflow: hidden;
    margin-top: 20%;
  }

  .delete {
    float: right;
  }

  .delete img {
    width: 30px;
    height: 30px;
    border-radius: 8px;
    overflow: hidden;
    margin-top: -15px;
    margin-right: -15px;
  }

  .from-username {
    font-size: 14px;
    color: #e6cc9b;
  }

  .hongbao-message {
    padding: 0 30px;
    margin: 15px 0;
    font-size: 20px;
    color: #e6cc9b;
    letter-spacing: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

  }

  .hongbao-descName {
    padding: 0 30px;
    margin: 15px 0;
    font-size: 12px;
    color: #e6cc9b;

    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    overflow: hidden;
    word-wrap: break-word;
    text-align: center;

  }

  .open-hongbao {
    margin: -55px auto 0 auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    font-size: 36px;
    width: 100px;
    height: 100px;
    border: 1px solid #f5c68b;
    background-color: #e6cc9b;
    border-radius: 50%;
    color: #000;
    box-shadow: 0px 4px 0px 0px rgba(0, 0, 0, 0.2);


  }

  .open-hongbao span {
    margin: 0 auto;
    display: inline-block;
  }

  .see-detail {
    display: block;
    margin-top: 20px;
    color: #e6cc9b;
    font-size: 12px;
    letter-spacing: 1px;
  }

  #apDiv1 {
    position: absolute;
    width: 300px;
    height: 400px;
    z-index: 100;
    left: 40px;
    top: 60px;
  }

  .backstyle {
    background: #ccc;
    background-color: rgba(20, 18, 18, 0.658);
  }
  /* .inputback{
    background: #ccc;
    background-color: rgba(20, 18, 18, 0.658);
  } */
</style>

<body>
  <div id="apDiv1" style="text-align: center"></div>
  <div class="firstdiv">
    <h2></h2>
    <div class="samadiv">
      <span>
        <label for="">创建人编号：</label>
        <input id="createUserId" name="createUserId" type="text" />
      </span>
      <span>
        <label for="">创建人名称：</label>
        <input id="createUserName" name="createUserName" type="text" />
      </span>
    </div>
    <div>
      <span>
        <label for="">活动开始时间：</label>
        <input id="fromDate" name="fromDate" type="text" />
      </span>
      <span>
        <label for="">活动结束时间：</label>
        <input id="thruDate" name="thruDate" type="text" />
      </span>
    </div>
    <div>
      <span>
        <label for="">产品名称：</label>
        <input id="prodcutName" name="productName" type="text" />
      </span>
      <span>
        <label for="">产品编号：</label>
        <input id="prodcutId" name="productId" type="text" />
      </span>
    </div>
    <div class="specialDiv">
      <span>
        <label for="">营销活动描述：</label>
        <textarea id="marketingActivityDes" name="marketingActivityDes" rows="3" cols="40"> </textarea>
      </span>
    </div>
    <div>
      <span>
        <label for="">营销游戏：</label>
        <input  name="gameName" type="text" />
        <!-- <img src='../../../../../../../assets/layout/images/njpoc/njbank.png' alt=''> -->
      </span>
    </div>
    <div id="gameName">
    
    </div>
    <div style="text-align:center; margin-top:30px;" onclick="alertred()" class="img-circle">
      <img style="height: 50%;width:50%;"
        src="./khb.jpg">
    </div>
    <main></main>
  </div>
</body>
<script>
  var descName = '已存入您的积分账户中,可用于积分兑换';
  var alertcontent = `<div class='hongbao-container'>
    <div class='hongbao'>
      <div [ngClass]='styleMethod01()'>
          <div class="delete" onclick="closeClick()">
          <img src="./shanchu.png">
        </div>
        <div class='avatar'>
          <img src='./njbank.png' alt=''>
        </div>
        <span class='from-username'>南京银行</span>
        <div></div>
        <div class='hongbao-message'></div>
        <div class='hongbao-descName' class='loading'>{{descName}}</div>
      </div>
      <div class='open-hongbao' [@openHongbaoAnm]='openState' (@openHongbaoAnm.done)='openHongbaoAnmDone($event)'
        onclick='openHongbao()' class='loading'>
        <span id="open">開</span>
      </div>
    </div>
  </div>`


  // function readyNumber() {

  //   $('textarea').each(function () {
  //     this.setAttribute('style', 'height:' + (this.scrollHeight) + 'px;overflow-y:hidden;');
  //   }).on('input', function () {
  //     this.style.height = 'auto';
  //     this.style.height = (this.scrollHeight) + 'px';
  //   })
  // }
  // function aa () {
  //   alert('aaaaaaaaaa')
  // }
  //弹出方法
  function alertred() {
    alert('红包打开了')
    console.log('aa')
    $('#apDiv1').append(alertcontent)//在main内部结尾处添加模态框，利用上述css代码改变位置
    $('body').addClass('backstyle')
    $('.img-circle').hide(500)
  }
  //关闭弹出层
  function closeClick() {
    $('.hongbao-container').remove()
    // $('input textarea').removeClass('inputback')
    $('body').removeClass('backstyle')
    $('.img-circle').show(500)
  }
  //打开红包
  function openHongbao () {
    var scoredata  = Math.round(Math.random()*1000 )
    if (scoredata>0) {
      $('.img-circle').remove()
      $('#gameName').addClass('gameNamediv')
      $('#gameName').text('您开出的'+scoredata+'积分，已经录入系统')
    }
    $('.hongbao-message').text(scoredata+'积分')
    $('.hongbao-descName').text('您开出的'+scoredata+'积分，已经录入系统')
    $('.open-hongbao').hide(500)
    console.log('dianjiledakai',scoredata)
  }
  // readyNumber()
  //获取url参数
  var url = window.location.href;//当前请求的url
  // var textall = document.getElementsByTagName('html')[0].innerHTML;
  var textall = document.getElementsByTagName('html')[0];
  console.log(textall,'teaxtall')
  $('h2').text('营销活动名称')
  $("#createUserId").val("0500");
  $("#createUserName").val("客户经理")
  $('#fromDate').val('2019-08-13')
  $('#thruDate').val('2019-08-31')
  $('#prodcutName').val('鑫祥盈')
  $('#prodcutId').val('PID00001')
  $('#marketingActivityDes').val('该营销活动旨在为客户提供完美的客户服务，提升客户体验感')
  $('#gameName').val('拆积分')
  var str = {
    countNum: 10,
    pageNum: 1,
    marketingCampaignId: 'MCE23010017',
    commonHeader: {
      timeStamp: "1565403581420",
      jumpPath: "custom/marketing/marketing-project/query-plan",
      extParam: {
        permissionMode: "BELONG_MODE",
        orgId: "ha02",
        managePermission: "Y",
        postId: "ADMIN",
        subBranchType: "",
        operatingLevel: "SUB_BRANCH_DT"
      },
      departmentId: "",
      tranDate: "20190810",
      tranTime: "101941420",
      lastTimeZone: "20190810101838843",
      userId: "0500",
      orgId: "0117",
      userRoles: " 1007,ADMIN,LHJJ,bushirenyuan002,bushirenyuan,WDKQ,TSJS,zhihanghangzhang,yewutuozhanbuzhuguan,FKJS,kehujingli",
      targetId: "101010"
    }
  }

  var string1 = JSON.stringify(str);
  var obj = JSON.parse(string1)
  var TZB_HTTP_CUS = 'http://172.16.101.133/ywsn/'
  var API = {
    queryMarketingCampaignById: 'queryMarketingCampaignById',
    queryTemplateContent: 'queryTemplateContent'
  }
   window.onload = function () {
    $.ajax({
      url: TZB_HTTP_CUS + API.queryMarketingCampaignById,
      type: 'POST',
      data: JSON.stringify(str),
      async: false,
      headers: {
        'x-ajax': '1',
        'Content-Type': 'application/json'
      },
      dataType: 'json',
      success: (data) => {
        if (data.returnCode.code == 'success') {
          // this.greenLoanA = data.energySavingFlag;
          console.log(data, 'this.lists')
          $('h2').text(data.campaignName)
          $("#createUserId").val(data.releaseUserId);
          $("#createUserName").val(data.releaseUserName)
          $('#fromDate').val(data.fromDate)
          $('#thruDate').val(data.thruDate)
          $('#productName').val(data.relationProductList[0].productName)
          $('#productId').val(data.relationProductList[0].prodcutId)
          $('#marketingActivityDes').val(data.marketingContentDes)
          $('#gameName').val('拆积分')
        } else {
          this.msgs = [];
          this.msgs.push({ severity: 'error', summary: '提示', detail: data.returnCode.message });
        }
      },
      error: (erro) => {
        this.msgs = [];
        this.msgs.push({ severity: 'error', summary: '提示', detail: "调用服务失败！" });
      }
    })
  }

  console.log($, '$')
</script>
